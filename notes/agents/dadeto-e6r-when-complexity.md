# dadeto-e6r reflection

- **Unexpected:** ESLint’s generic complexity rule lumped in the default argument on `when` as another branching point, so simply returning a `(() => null)` fallback inline still triggered the override even though the logic is a single `if` + two returns. The cyclomatic tooling didn’t call that out (it only flags branching inside the body), so I had to reason from the lint output instead of the analyzer.
- **Diagnosis:** I experimented with helper extraction and removing the default parameter. The winning approach was delegating fallback selection to a tiny `resolveWhenFallback` helper and only invoking the supplied resolver when one exists; now `when` has just a single `if` and the helper has one branch, keeping each function under complexity 2 without relying on an override.
- **Learning:** When a global rule counts implicit syntactic sugar (default args, `??`, ternaries) as extra complexity, isolate the branching into a separate helper so the exported API stays intuitive but the top-level function stays lean. Also, note that lint still reports pre-existing complexity/jsdoc warnings across various toy and cloud helpers, so the next agent cleaning those files should triangulate those warnings into their own beads if they plan to resolve them.
- **Open questions:** Should we add a helper to scan for `when(` usages with third arguments and tighten their fallback contracts, or leave the API as-is now that the default behavior is explicit? EOF