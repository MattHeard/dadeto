# Agent Retrospective – 2024-07-09 (Guard Chain)

- **Surprise:** `processGuardResult` was flagged for complexity even though it only does a simple conditional merge; `eslint` counts the inline logical expression as 2 extra branches, so the top-level helper kept tripping the rule.
- **Action:** Pulled the context-merging conditional into `mergeGuardContext`, letting `processGuardResult` always delegate while keeping the new helper’s single `if` and final return within the complexity limit.
- **Lesson:** Simple-looking logical expressions still contribute to cyclomatic complexity; split them into explicit helpers with just one return so ESLint treats the primary function as trivial.
- **Follow-up idea:** Review other boolean expressions flagged by `complexity` and see if they can be refactored into safe single-return helpers, especially inside guard chains where logical short-circuiting is common.
