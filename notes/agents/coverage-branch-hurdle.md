- **Surprise**: After swapping to the optimistic `config` assumption I dropped the `authorizeRequest` guard, lint still passed but coverage dipped because `buildHandleRenderRequest` and parts of the render helpers had been exercising previously unhit branches (array headers with missing entries, header type fall-throughs, `consoleError` payload fallbacks, etc.).
- **Diagnosis**: I inspected `reports/coverage/coverage-final.json` to pinpoint the lone uncovered statements/branches (`resolveAuthorizationHeader` array/hashfallthroughs and `render-variant` fallback in `invalidatePaths`). The branch map made it clear which helper paths the tests were missing, so I wrote dedicated cases that trigger the missing falls (header arrays with undefined front entries, non-string headers, raw invalidation errors without `.message`, and authorization requests without a logger).
- **Resolution**: Added the new tests and a small refactor to precompute an empty project ID so the fallback path is exercised more predictably. Re-running `npm test` now yields 100% coverage again. Reminder for future agents: if coverage drops by a single branch, the branch map trace is the quickest way to see which `||`/`?` expression needs an extra test.
