Dropping the optional `findAvailablePageNumberFn` argument meant the handwritten tests no longer had a hook into the resolver; I first tried `jest.spyOn`/`jest.mock` against the ESM export, but the bindings are read-only so the mocks blew up with “cannot assign to read only property”. The solution was to expose a mutable resolver wrapper (`findAvailablePageNumberResolver`) with `setFindAvailablePageNumberResolver`/`resetFindAvailablePageNumberResolver`, letting the handler always call the default implementation while the suites swap in their own mocks and clean up afterwards.

Lesson: when an ESM export must be stubbed for testing, a small proxy with explicit setter/resetter often beats fighting the module system. Open question: should we document or share this resolver pattern for other hard-to-stub helpers so future agents don’t retry the same `jest.mock` path?
